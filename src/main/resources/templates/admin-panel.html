<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Range Package Manager Admin</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            padding: 30px;
            background-color: #000;
            color: #fff;
        }
        h1, h2 {
            margin-bottom: 20px;
        }
        section {
            margin-bottom: 40px;
        }
        .api-card {
            background-color: #1e1e1e;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
        }
        .api-card h3 {
            color: #66aaff;
            margin-bottom: 10px;
        }
        .api-card code {
            background-color: #2b2b2b;
            color: #ccc;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            font-size: 14px;
        }
        .api-card p, .api-card input, .api-card button {
            font-size: 14px;
            margin-top: 8px;
        }
        input[type="text"] {
            padding: 6px;
            border: 1px solid #555;
            border-radius: 4px;
            background: #111;
            color: #fff;
        }
        button {
            background-color: #66aaff;
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 6px;
        }
        button:hover {
            background-color: #5599dd;
        }
    </style>
</head>
<body onload="getAllPackages()">
<h1>ðŸ“¦ Range Admin Panel</h1>

<section>
    <h2>Get All Packages</h2>
    <div class="api-card">
        <h3>GET /info/all</h3>
        <pre id="allResult" style="margin-top: 10px;"></pre>
    </div>
</section>

<section>
    <h2>Delete Package</h2>
    <div class="api-card">
        <h3>DELETE /packages/delete/{packageName}</h3>
        <input type="text" id="deleteInput" placeholder="Enter package name" />
        <button onclick="deletePackage()">Delete</button>
        <p id="deleteResult"></p>
    </div>
</section>

<section>
    <h2>Search Package</h2>
    <div class="api-card">
        <h3>GET /info/{packageName}</h3>
        <input type="text" id="searchInput" placeholder="Enter package name" />
        <button onclick="searchPackage()">Search</button>
        <pre id="searchResult" style="margin-top: 10px;"></pre>
    </div>
</section>

<section>
    <h2>Upload Package</h2>
    <div class="api-card">
        <h3>POST /packages/upload</h3>
        <input type="file" id="uploadFile" />
        <input type="text" id="uploadAuthor" placeholder="Author" />
        <input type="text" id="uploadVersion" placeholder="Version" />
        <button onclick="uploadPackage()">Upload</button>
        <p id="uploadResult"></p>
    </div>
</section>

<script>
    function deletePackage() {
        const name = document.getElementById('deleteInput').value;
        if (!name) return;
        fetch(`http://localhost:8080/packages/delete/${name}`, {
            method: 'DELETE'
        })
            .then(res => res.json())
            .then(data => {
                document.getElementById('deleteResult').textContent = data.message || 'Deleted';
                getAllPackages();
            })
            .catch(() => {
                document.getElementById('deleteResult').textContent = 'Error deleting package';
            });
    }

    function searchPackage() {
        const name = document.getElementById('searchInput').value;
        if (!name) return;
        fetch(`http://localhost:8080/info/${name}`)
            .then(res => res.json())
            .then(data => {
                document.getElementById('searchResult').textContent = JSON.stringify(data, null, 2);
            })
            .catch(() => {
                document.getElementById('searchResult').textContent = 'Not found or error.';
            });
    }

    function getAllPackages() {
        fetch(`http://localhost:8080/info/all`)
            .then(res => res.json())
            .then(data => {
                document.getElementById('allResult').textContent = JSON.stringify(data, null, 2);
            })
            .catch(() => {
                document.getElementById('allResult').textContent = 'Error retrieving packages.';
            });
    }

    function uploadPackage() {
        const file = document.getElementById('uploadFile').files[0];
        const author = document.getElementById('uploadAuthor').value;
        const version = document.getElementById('uploadVersion').value;
        if (!file || !author || !version) {
            document.getElementById('uploadResult').textContent = 'Fill all fields';
            return;
        }
        const formData = new FormData();
        formData.append('file', file);
        formData.append('author', author);
        formData.append('version', version);
        fetch('http://localhost:8080/packages/upload', {
            method: 'POST',
            body: formData
        })
            .then(res => res.json())
            .then(data => {
                document.getElementById('uploadResult').textContent = data.message || 'Uploaded';
                getAllPackages();
            })
            .catch(() => {
                document.getElementById('uploadResult').textContent = 'Error uploading package';
            });
    }
</script>
</body>
</html>
